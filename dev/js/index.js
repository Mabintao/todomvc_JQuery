!function(){function t(t,e){var n=0;$(".todoapp .main .todo-list").html(null),null!=store.get("todo_list")&&(p=store.get("todo_list")),0==t?$.each(p,function(t,e){e.completed||n++,o(t,e)}):1==t?$.each(p,function(t,e){e.completed||n++,e.completed||o(t,e)}):2==t&&$.each(p,function(t,e){e.completed||n++,e.completed&&o(t,e)}),e||n==p.length&&$("#toggle-all").prop("checked","checked"),$(".todo-count strong").text(n),i(),l(),c(),a(),s(),d(),u()}function e(){store.set("todo_list",p)}function i(){f.keydown(function(i){if(13==i.keyCode){if(!f.val())return;var n={};n.content=f.val(),n.completed=!1,p.push(n),f.val(null),e(),t(h)}})}function n(t,e){return'<li data-index="'+t+'" class="'+(e.completed?"completed":"")+'" ><div class="view"><input class="toggle" type="checkbox" '+(e.completed?"checked":"")+"><label>"+e.content+'</label><button class="destroy"></button></div><input class="edit" value="Rule the web"></li>'}function o(t,e){$(".todoapp .main .todo-list").prepend(n(t,e))}function l(){$(".todo-list .view label").dblclick(function(t){var i=this,n=$(this).parent().parent().data("index");$(this).parent().parent().addClass("editing"),$(".todo-list .editing .edit").val($(this).text()),$(".todo-list .editing .edit").select(),$(".todo-list .editing .edit").focus(),$(".todo-list .editing .edit").blur(function(){""!=$(".todo-list .editing .edit").val()&&(console.log(1),$(i).text($(".todo-list .editing .edit").val()),p[n].content=$(".todo-list .editing .edit").val(),e()),$(i).parent().parent().removeClass("editing")})})}function c(){$(".view .destroy").click(function(){var i=$(this).parent().parent().data("index");$(window).on("mouseup keyup",function(){clearSlct()}),p.splice(i,1),e(),t(h)})}function d(){$(".clear-completed").click(function(){for(var i=0;i<p.length;i++)p[i].completed&&p.splice(i,1);e(),t(h)})}function a(){$(".todo-list .toggle").click(function(){var i=$(this).parent().parent().data("index");p[i].completed=!p[i].completed,e(),t(h)})}function s(){$(".main>label").click(function(){r.is(":checked")?$.each(p,function(t,e){e.completed=!0}):$.each(p,function(t,e){e.completed=!1}),e(),t(h,!0)})}function u(){g.each(function(e,i){$(i).click(function(){h=e,$(this).find("a").addClass("selected"),$(this).siblings().find("a").removeClass("selected"),t(e)})})}var p=[],r=$("#toggle-all"),f=$(".new-todo"),g=$(".filters li"),h=0;t(h)}();